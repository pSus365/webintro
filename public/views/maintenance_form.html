<?php
$pageTitle = "Stitch Design - Dodaj Serwis";
include 'partials/header.php';
?>

<div class="page-header-row">
    <h1 class="page-title">Dodaj Czynność Serwisową</h1>
</div>

<div class="content-container"
    style="max-width: 600px; background: white; padding: 2rem; border-radius: 8px; border: 1px solid var(--border-color);">
    <form action="/add-maintenance" method="POST">
        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Pojazd</label>
            <select name="vehicle_id" required
                style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px;">
                <?php foreach ($vehicles as $vehicle): ?>
                <option value="<?= $vehicle['id'] ?>" <?=(isset($selectedVehicleId) &&
                    $selectedVehicleId==$vehicle['id']) ? 'selected' : '' ?>>
                    <?= $vehicle['name'] ?> (
                    <?= $vehicle['type'] ?>)
                </option>
                <?php endforeach; ?>
            </select>
        </div>

        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Opis</label>
            <input type="text" name="description" required placeholder="np. Wymiana oleju"
                style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px;">
        </div>

        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Data
                Planowana</label>
            <input type="date" name="maintenance_date" required
                style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px;">
        </div>

        <div class="form-group" style="margin-bottom: 1.5rem;">
            <label style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Przewidywany Koszt
                (PLN)</label>
            <input type="number" step="0.01" name="cost" required placeholder="0.00"
                style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px;">
        </div>

        <div class="form-group" style="margin-bottom: 1.5rem; display: flex; align-items: center; gap: 0.5rem;">
            <input type="checkbox" name="is_inspection" id="is_inspection" value="1">
            <label for="is_inspection" style="cursor: pointer; user-select: none;">To jest przegląd okresowy
                (zaktualizuj datę następnego serwisu)</label>
        </div>

        <div style="display: flex; gap: 1rem; justify-content: flex-end;">
            <a href="/maintenance" style="padding: 0.5rem 1rem; text-decoration: none; color: #666;">Anuluj</a>
            <button type="submit" class="btn-primary"
                style="padding: 0.5rem 2rem; border: none; border-radius: 4px; background: var(--primary-color); color: white; cursor: pointer;">Zapisz</button>
        </div>
    </form>
</div>

<?php include 'partials/footer.php'; ?>