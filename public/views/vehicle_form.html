<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link crossorigin="" href="https://fonts.gstatic.com/" rel="preconnect" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <title>Stitch Design -
        <?= ($action === 'edit') ? 'Edytuj Pojazd' : 'Dodaj Pojazd' ?>
    </title>
    <link href="data:image/x-icon;base64," rel="icon" type="image/x-icon" />
    <link rel="stylesheet" href="public/styles/vehicles.css">
</head>

<body>
    <div class="app-container">
        <div class="main-wrapper">
            <!-- Header (Reused) -->
            <header class="top-header">
                <div class="logo-section">
                    <div class="logo-icon">
                        <svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 2L2 7V17L12 22L22 17V7L12 2Z"></path>
                            <path d="M12 12L2 7"></path>
                            <path d="M12 12L22 7"></path>
                            <path d="M12 12V22"></path>
                            <path d="M7 4.5L17 9.5"></path>
                        </svg>
                    </div>
                    <h2 class="logo-text">Fleet Manager</h2>
                </div>
                <div class="header-actions">
                    <nav class="main-nav">
                        <a class="nav-link" href="/dashboard">Dashboard</a>
                        <a class="nav-link active" href="/vehicles">Pojazdy</a>
                        <a class="nav-link" href="/drivers">Kierowcy</a>
                        <a class="nav-link" href="/maintenance">Utrzymanie</a>
                        <a class="nav-link" href="/raports">Raporty</a>
                    </nav>
                </div>
            </header>

            <main class="content-area">
                <div class="page-header-row">
                    <h1 class="page-title">
                        <?= ($action === 'edit') ? 'Edycja Pojazdu' : 'Nowy Pojazd' ?>
                    </h1>
                    <a href="/vehicles" class="btn-primary"
                        style="background-color: var(--text-muted); text-decoration: none;">
                        Powrót
                    </a>
                </div>

                <div class="table-container" style="padding: 2rem;">
                    <form action="<?= ($action === 'edit') ? '/edit-vehicle' : '/add-vehicle' ?>" method="POST"
                        style="max-width: 600px; margin: 0 auto; display: flex; flex-direction: column; gap: 1rem;">
                        <?php if($action === 'edit'): ?>
                        <input type="hidden" name="id" value="<?= $vehicle['id'] ?>">
                        <?php endif; ?>

                        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                            <label style="font-weight: 500; font-size: 0.875rem;">Nazwa</label>
                            <input type="text" name="name" required value="<?= $vehicle['name'] ?? '' ?>"
                                class="search-input" style="padding-left: 1rem;">
                        </div>

                        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                            <label style="font-weight: 500; font-size: 0.875rem;">Typ</label>
                            <input type="text" name="type" required value="<?= $vehicle['type'] ?? '' ?>"
                                class="search-input" style="padding-left: 1rem;">
                        </div>

                        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                            <label style="font-weight: 500; font-size: 0.875rem;">Przebieg (km)</label>
                            <input type="number" name="mileage" required value="<?= $vehicle['mileage'] ?? '' ?>"
                                class="search-input" style="padding-left: 1rem;">
                        </div>

                        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                            <label style="font-weight: 500; font-size: 0.875rem;">Następny Przegląd</label>
                            <input type="date" name="next_service_date" required
                                value="<?= $vehicle['next_service_date'] ?? '' ?>" class="search-input"
                                style="padding-left: 1rem;">
                        </div>

                        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                            <label style="font-weight: 500; font-size: 0.875rem;">Przewidywany koszt serwisu
                                (PLN)</label>
                            <input type="number" step="0.01" name="estimated_service_cost" required
                                value="<?= $vehicle['estimated_service_cost'] ?? '' ?>" class="search-input"
                                style="padding-left: 1rem;">
                        </div>

                        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                            <label style="font-weight: 500; font-size: 0.875rem;">Status</label>
                            <select name="status" class="search-input" style="padding-left: 1rem;">
                                <option value="wolny" <?=(isset($vehicle['status']) && $vehicle['status']==='wolny' )
                                    ? 'selected' : '' ?>>Wolny</option>
                                <option value="w trasie" <?=(isset($vehicle['status']) &&
                                    $vehicle['status']==='w trasie' ) ? 'selected' : '' ?>>W trasie</option>
                                <option value="serwis" <?=(isset($vehicle['status']) && $vehicle['status']==='serwis' )
                                    ? 'selected' : '' ?>>Serwis</option>
                            </select>
                        </div>

                        <button type="submit" class="btn-primary" style="margin-top: 1rem; w-full: 100%;">
                            <?= ($action === 'edit') ? 'Zapisz zmiany' : 'Dodaj pojazd' ?>
                        </button>
                    </form>
                </div>
            </main>
        </div>
    </div>
</body>

</html>