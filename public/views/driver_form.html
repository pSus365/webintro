<?php
$pageTitle = "Fleet Manager - " . (($action === 'edit') ? 'Edytuj Kierowcę' : 'Dodaj Kierowcę');
$extraStyles = ['/public/styles/drivers.css'];
include 'partials/header.php';
?>

<div class="page-header-row">
    <h1 class="page-title">
        <?= ($action === 'edit') ? 'Edycja Kierowcy' : 'Nowy Kierowca' ?>
    </h1>
    <a href="/drivers" class="btn-primary" style="background-color: var(--text-muted); text-decoration: none;">
        Powrót
    </a>
</div>

<div class="table-container" style="padding: 2rem;">
    <form action="<?= ($action === 'edit') ? '/edit-driver' : '/add-driver' ?>" method="POST"
        style="max-width: 600px; margin: 0 auto; display: flex; flex-direction: column; gap: 1rem;">
        <?php if($action === 'edit'): ?>
        <input type="hidden" name="id" value="<?= $driver['id'] ?>">
        <?php endif; ?>

        <div style="display: flex; gap: 1rem;">
            <div style="display: flex; flex-direction: column; gap: 0.5rem; flex: 1;">
                <label style="font-weight: 500; font-size: 0.875rem;">Imię</label>
                <input type="text" name="first_name" required value="<?= $driver['first_name'] ?? '' ?>"
                    class="search-input" style="padding-left: 1rem;">
            </div>
            <div style="display: flex; flex-direction: column; gap: 0.5rem; flex: 1;">
                <label style="font-weight: 500; font-size: 0.875rem;">Nazwisko</label>
                <input type="text" name="last_name" required value="<?= $driver['last_name'] ?? '' ?>"
                    class="search-input" style="padding-left: 1rem;">
            </div>
        </div>

        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
            <label style="font-weight: 500; font-size: 0.875rem;">Data urodzenia</label>
            <input type="date" name="birth_date" required value="<?= $driver['birth_date'] ?? '' ?>"
                class="search-input" style="padding-left: 1rem;">
        </div>

        <div style="display: flex; gap: 1rem;">
            <div style="display: flex; flex-direction: column; gap: 0.5rem; flex: 1;">
                <label style="font-weight: 500; font-size: 0.875rem;">Miasto</label>
                <input type="text" name="city" required value="<?= $driver['city'] ?? '' ?>" class="search-input"
                    style="padding-left: 1rem;">
            </div>
            <div style="display: flex; flex-direction: column; gap: 0.5rem; flex: 1;">
                <label style="font-weight: 500; font-size: 0.875rem;">Ulica</label>
                <input type="text" name="street" required value="<?= $driver['street'] ?? '' ?>" class="search-input"
                    style="padding-left: 1rem;">
            </div>
            <div style="display: flex; flex-direction: column; gap: 0.5rem; width: 80px;">
                <label style="font-weight: 500; font-size: 0.875rem;">Nr domu</label>
                <input type="text" name="house_number" required value="<?= $driver['house_number'] ?? '' ?>"
                    class="search-input" style="padding-left: 1rem;">
            </div>
        </div>

        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
            <label style="font-weight: 500; font-size: 0.875rem;">Data Zatrudnienia</label>
            <input type="date" name="employment_date" required value="<?= $driver['employment_date'] ?? '' ?>"
                class="search-input" style="padding-left: 1rem;">
        </div>

        <div style="display: flex; flex-direction: column; gap: 0.5rem;">
            <label style="font-weight: 500; font-size: 0.875rem;">Status</label>
            <select name="status" class="search-input" style="padding-left: 1rem;">
                <option value="wolny" <?=(isset($driver['status']) && $driver['status']==='wolny' ) ? 'selected' : '' ?>
                    >Wolny</option>
                <option value="w trasie" <?=(isset($driver['status']) && $driver['status']==='w trasie' ) ? 'selected'
                    : '' ?>>W trasie</option>
                <option value="L4" <?=(isset($driver['status']) && $driver['status']==='L4' ) ? 'selected' : '' ?>>L4
                </option>
            </select>
        </div>

        <button type="submit" class="btn-primary" style="margin-top: 1rem; width: 100%;">
            <?= ($action === 'edit') ? 'Zapisz zmiany' : 'Dodaj kierowcę' ?>
        </button>
    </form>
</div>

<?php include 'partials/footer.php'; ?>